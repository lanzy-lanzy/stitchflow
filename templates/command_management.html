{% extends 'base.html' %}

{% block title %}Command Management - El Senior Dumingag{% endblock %}

{% block content %}
<div class="bg-white rounded-lg shadow-md p-6">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Command Management</h2>
        <button id="refreshBtn" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">
            <i class="fas fa-sync-alt mr-2"></i>Refresh
        </button>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-blue-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-blue-800 mb-2">Inventory Management</h3>
            <p class="text-gray-600 mb-4">Manage fabric and accessory inventory levels</p>
            <div class="space-y-2">
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="inventory_management" data-action="check">
                    <i class="fas fa-check-circle mr-2 text-green-500"></i>Check Inventory
                </button>
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="inventory_management" data-action="low-stock">
                    <i class="fas fa-exclamation-triangle mr-2 text-yellow-500"></i>Check Low Stock
                </button>
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="inventory_management" data-action="restock">
                    <i class="fas fa-plus-circle mr-2 text-blue-500"></i>Restock Inventory
                </button>
            </div>
        </div>
        
        <div class="bg-purple-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-purple-800 mb-2">Customer Management</h3>
            <p class="text-gray-600 mb-4">Manage customer records and data</p>
            <div class="space-y-2">
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="customer_management" data-action="list">
                    <i class="fas fa-list mr-2 text-blue-500"></i>List Customers
                </button>
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="customer_management" data-action="create">
                    <i class="fas fa-user-plus mr-2 text-green-500"></i>Create Customer
                </button>
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="customer_management" data-action="search">
                    <i class="fas fa-search mr-2 text-purple-500"></i>Search Customers
                </button>
            </div>
        </div>
        
        <div class="bg-green-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-green-800 mb-2">Data Management</h3>
            <p class="text-gray-600 mb-4">Populate and manage system data</p>
            <div class="space-y-2">
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="populate_data" data-action="populate">
                    <i class="fas fa-database mr-2 text-green-500"></i>Populate Sample Data
                </button>
                <button class="command-btn w-full text-left px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50" 
                        data-command="populate_data" data-action="clear">
                    <i class="fas fa-trash mr-2 text-red-500"></i>Clear All Data
                </button>
            </div>
        </div>
    </div>
    
    <!-- Command Execution Area -->
    <div class="bg-gray-50 rounded-lg p-6">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Command Execution</h3>
        
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">Selected Command</label>
            <div class="flex space-x-2">
                <input type="text" id="selectedCommand" readonly 
                    class="flex-1 px-4 py-2 border border-gray-300 rounded-md bg-gray-100">
                <button id="executeBtn" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50" disabled>
                    Execute
                </button>
            </div>
        </div>
        
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">Command Parameters</label>
            <textarea id="commandParams" rows="3" 
                class="w-full px-4 py-2 border border-gray-300 rounded-md" 
                placeholder="Enter command parameters (one per line)"></textarea>
        </div>
        
        <div>
            <label class="block text-gray-700 mb-2">Output</label>
            <div class="bg-black text-green-400 p-4 rounded-md font-mono text-sm overflow-y-auto max-h-64">
                <pre id="commandOutput">$ Select a command to begin</pre>
            </div>
        </div>
    </div>
</div>

<script>
    // Get CSRF token
    const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
    
    // Add event listeners to command buttons
    document.querySelectorAll('.command-btn').forEach(button => {
        button.addEventListener('click', function() {
            const command = this.getAttribute('data-command');
            const action = this.getAttribute('data-action');
            const fullCommand = `${command} --action ${action}`;
            
            document.getElementById('selectedCommand').value = fullCommand;
            document.getElementById('executeBtn').disabled = false;
            
            // Update output area
            document.getElementById('commandOutput').textContent = `$ ${fullCommand}\nClick "Execute" to run this command`;
        });
    });
    
    // Execute button
    document.getElementById('executeBtn').addEventListener('click', executeCommand);
    
    // Refresh button
    document.getElementById('refreshBtn').addEventListener('click', function() {
        document.getElementById('selectedCommand').value = '';
        document.getElementById('commandParams').value = '';
        document.getElementById('commandOutput').textContent = '$ Select a command to begin';
        document.getElementById('executeBtn').disabled = true;
    });
    
    function executeCommand() {
        const command = document.getElementById('selectedCommand').value;
        const params = document.getElementById('commandParams').value;
        
        if (!command) {
            alert('Please select a command first');
            return;
        }
        
        // Show executing message
        document.getElementById('commandOutput').textContent = `$ ${command}\nExecuting command...`;
        
        // In a real implementation, this would call an API endpoint to execute the command
        // For now, we'll simulate the execution
        setTimeout(() => {
            const output = `Command: ${command}\nParameters: ${params || 'None'}\n\nSimulation: Command executed successfully!\n\nOutput:\n----------------------------------------\nThis is simulated output for the command.\nIn a real implementation, this would show the actual command output.\n----------------------------------------\n\nCommand completed.`;
            document.getElementById('commandOutput').textContent = output;
        }, 2000);
    }
</script>
{% endblock %}